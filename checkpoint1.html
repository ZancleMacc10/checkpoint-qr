xec
<!DOCTYPE html>
<html>
<head>
  <title>Checkpoint 1 - Registrazione</title>
  <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
  <style>
  body {
    font-family: sans-serif;
    text-align: center;
    padding: 20px;
    font-size: 18px; /* aumentato */
  }
  #reader {
    width: 90%;
    max-width: 400px;
    margin: auto;
  }
  input {
    padding: 12px;
    font-size: 18px;
    width: 90%;
    max-width: 350px;
    margin-bottom: 10px;
  }
  button {
    padding: 14px 24px;
    font-size: 18px;
    margin-top: 10px;
  }
</style>

</head>
<body>
  <h2>Checkpoint 1</h2>
  <p>Scansiona il tuo QR personale</p>

  <div id="reader"></div>
  <p id="result">In attesa della scansione...</p>
  <button onclick="invia()" disabled id="submitBtn">Invia registrazione</button>

  <script>
    let id_concorrente = "";
    const checkpoint = "Checkpoint1";
const scriptUrl = "https://script.google.com/macros/s/AKfycbzdYN_4dLyUSsDwjtZvAcMoJSV1qfiEBNUqOV9Qu4yZTuI0dyvUxn9KhsxezJY2fcjy6g/exec";

    function onScanSuccess(decodedText, decodedResult) {
      document.getElementById("result").innerHTML = "âœ… ID rilevato: " + decodedText;
      id_concorrente = decodedText;
      document.getElementById("submitBtn").disabled = false;
      html5QrcodeScanner.clear();
    }

    function invia() {
      if (!id_concorrente) return alert("Nessun ID rilevato");

      const url = scriptUrl + "?id=" + encodeURIComponent(id_concorrente) +
                  "&checkpoint=" + encodeURIComponent(checkpoint);

      fetch(url)
        .then(r => r.text())
        .then(txt => document.getElementById("result").innerHTML = txt)
        .catch(err => alert("Errore nell'invio dati"));
    }

    const html5QrcodeScanner = new Html5QrcodeScanner(
      "reader", { fps: 10, qrbox: 250 });
    html5QrcodeScanner.render(onScanSuccess);
  </script>
</body>
</html>
